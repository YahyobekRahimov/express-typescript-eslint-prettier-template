<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>User Management</title>
    <%- include('../../css/base.ejs') %> <%-
    include('./user-management-styles.ejs') %>
  </head>
  <body>
    <%- include('../../components/navbar.ejs') %>

    <div class="container">
      <%- include('../../components/sidebar.ejs', { currentPage:
      'users', isAdmin }) %>

      <div class="main-content">
        <div class="users-table-container">
          <div class="table-header">
            <h2>Staff Members</h2>
            <button id="openModalBtn" class="btn-add-user">+</button>
          </div>
          <% if (users && users.length > 0) { %>
          <table class="users-table">
            <thead>
              <tr>
                <th>Username</th>
                <th>Role</th>
                <th>Created At</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% users.forEach((u) => { %>
              <tr>
                <td><%= u.username %></td>
                <td>
                  <span class="role-badge role-<%= u.role %>">
                    <%= u.role %>
                  </span>
                </td>
                <td>
                  <%= new Date(u.created_at).toLocaleDateString() %>
                </td>
                <td>
                  <button class="btn btn-sm btn-edit">Edit</button>
                  <button class="btn btn-sm btn-delete">
                    Delete
                  </button>
                </td>
              </tr>
              <% }); %>
            </tbody>
          </table>
          <% } else { %>
          <p class="no-users">No staff members added yet.</p>
          <% } %>
        </div>
      </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Add New Staff Member</h2>
        <form id="addUserForm">
          <div class="form-group">
            <label for="username">Username</label>
            <input
              type="text"
              id="username"
              name="username"
              required
              placeholder="Enter username"
            />
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              required
              placeholder="Enter password"
            />
          </div>
          <div class="form-buttons">
            <button type="submit" class="btn-submit">
              Add Staff Member
            </button>
            <button
              type="button"
              class="btn-cancel"
              id="closeModalBtn"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="/js/user-management.js"></script>
  </body>
</html>
